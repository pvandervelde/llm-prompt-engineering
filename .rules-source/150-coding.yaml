# metadata: merge_with_others=true

- name: coding-comments
  scope: repository
  editors:
    - name: copilot
      modes: [edit, agent]
    - name: cline
      modes: [act]
    - name: roo
      modes: [code, debug, architect]
  apply-to:
    - "**"
  text: |
    Use comments to explain the purpose and reasoning behind non-obvious code. Focus on *why* the code is written
    this way â€” for example, domain-specific constraints, algorithmic trade-offs, or error handling strategy.
    Avoid commenting obvious control flow or syntax.

- name: coding-explain-before-code
  scope: user
  editors:
    - name: copilot
      modes: [edit, agent]
    - name: cline
      modes: [act]
    - name: roo
      modes: [code, debug, architect]
  apply-to:
    - "**"
  text: |
    Before producing code, describe what the code will do, any assumptions, and possible areas of uncertainty.
    Use pseudocode or step-by-step outlines when helpful.

- name: coding-reflect-on-failure
  scope: user
  editors:
    - name: copilot
      modes: [edit, agent]
    - name: cline
      modes: [act]
    - name: roo
      modes: [code, debug, architect]
  apply-to:
    - "**"
  text: |
    If previous code suggestions failed to compile or pass tests, analyze why they failed. Do not repeat the same logic.
    Explain what went wrong, and describe how the new solution avoids the same problem.

- name: coding-style
  scope: repository
  editors:
    - name: copilot
      modes: [edit, agent]
    - name: cline
      modes: [act]
    - name: roo
      modes: [architect, code, debug]
  apply-to:
    - "**"
  text: |
    Follow the style guides for the language. Use the appropriate formatters to format your code. This will
    help ensure that the code is consistent and easy to read.

- name: coding-test-granularity
  scope: repository
  editors:
    - name: copilot
      modes: [edit, agent]
    - name: cline
      modes: [act]
    - name: roo
      modes: [code, debug, architect]
  apply-to:
    - "**"
  text: |
    Each test should verify one behavior or input class. Use descriptive names that explain what is being tested.
    Prefer many small, specific tests over a few broad ones.

- name: coding-tests-always
  scope: repository
  editors:
    - name: copilot
      modes: [edit, agent]
    - name: cline
      modes: [act]
    - name: roo
      modes: [code, debug, architect]
  apply-to:
    - "**"
  text: |
    After implementing any logic, immediately write unit tests that verify its correctness.
    Include realistic inputs, edge cases, and error conditions. Use the naming convention rules for test files.
